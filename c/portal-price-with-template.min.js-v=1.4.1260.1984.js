(function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d=[].slice;b=window||exports,b.EVENT_HISTORY||(b.EVENT_HISTORY={}),a=function(){function a(){this.generateSelectors=c(this.generateSelectors,this),this.triggerProductEvent=c(this.triggerProductEvent,this),this.bindProductEvent=c(this.bindProductEvent,this)}return a.prototype.bindProductEvent=function(a,b,c){var e,f,g,h,i,j;if(null==c&&(c=0),e=function(a,b,e){var f;return $(window).on(a,function(){var a,f,g;return f=arguments[0],a=2<=arguments.length?d.call(arguments,1):[],g=a[c],e===g?b.apply(null,[f].concat(d.call(a))):void 0}),null!=(null!=(f=EVENT_HISTORY[e])?f[a]:void 0)?b.apply(null,EVENT_HISTORY[e][a]):void 0},this.options.multipleProductIds){for(i=this.productId,j=[],g=0,h=i.length;h>g;g++)f=i[g],j.push(e(a,b,f));return j}return e(a,b,this.productId)},a.prototype.triggerProductEvent=function(){var a,b,c,e,f,g;return f=arguments[0],a=2<=arguments.length?d.call(arguments,1):[],c=this.element||$window,e=jQuery.Event(f),b=[this.productId].concat(d.call(a)),c.trigger(e,b),EVENT_HISTORY[g=this.productId]||(EVENT_HISTORY[g]={}),EVENT_HISTORY[this.productId][f]=[e].concat(d.call(b))},a.prototype.generateSelectors=function(a){var b,c,d=this;for(b in a)c=a[b],"function"==typeof c?this["find"+b]=c:this["find"+b]=function(a){return function(){return d.element.find(a)}}(c),this["findFirst"+b]=function(a){return function(){return $(d["find"+a]()[0])}}(b),this["show"+b]=function(a){return function(){return d["find"+a]().show()}}(b),this["hide"+b]=function(a){return function(){return d["find"+a]().hide()}}(b);return this.showAll=function(a){return function(){var e;e=[];for(b in a)c=a[b],e.push(d["show"+b]());return e}}(a),this.hideAll=function(a){return function(){var e;e=[];for(b in a)c=a[b],e.push(d["hide"+b]());return e}}(a)},a}(),b.ProductComponent=a}).call(this),function(){function a(a,c){return a.section(c._get(!1,["product"]),c,{block:b},null).section(c._get(!1,["accessories"]),c,{block:h},null).section(c._get(!1,["total"]),c,{block:i},null)}function b(a,b){return a.write('<div class="productPrice"><p class="descricao-preco">').section(b._get(!1,["available"]),b,{block:c},null).write('</p><p class="preco-a-vista price-cash">').section(b._get(!1,["available"]),b,{block:f},null).write("</p>").section(b._get(!1,["hasDiscount"]),b,{block:g},null).write("</div>")}function c(a,b){return a.section(b._get(!1,["validListPrice"]),b,{block:d},null).section(b._get(!1,["validBestPrice"]),b,{block:e},null).write('<em class="valor-dividido price-installments" style="display: block"><span><span>ou <label class="skuBestInstallmentNumber">').reference(b._get(!1,["installments"]),b,"h").write('<span class="x">x</span></label> de </span><strong><label class="skuBestInstallmentValue">').reference(b._get(!1,["installmentsValue"]),b,"h",["intAsCurrency"]).write("</label></strong></span></em>")}function d(a,b){return a.write('<em class="valor-de price-list-price" style="display: block">').reference(b._get(!1,["strings","listPrice"]),b,"h").write('<strong class="skuListPrice">').reference(b._get(!1,["listPrice"]),b,"h",["intAsCurrency"]).write("</strong></em>")}function e(a,b){return a.write('<em class="valor-por price-best-price" style="display: block">').reference(b._get(!1,["strings","bestPrice"]),b,"h").write('<strong class="skuBestPrice">').reference(b._get(!1,["bestPrice"]),b,"h",["intAsCurrency"]).write("</strong></em>")}function f(a,b){return a.write('Preço a vista:<strong class="skuPrice">').reference(b._get(!1,["bestPrice"]),b,"h",["intAsCurrency"]).write("</strong>")}function g(a,b){return a.write('<em class="economia-de">').reference(b._get(!1,["strings","discountOf"]),b,"h").write(' <span class="economia">').reference(b._get(!1,["discount"]),b,"h",["intAsCurrency"]).write("</span></em>")}function h(a,b){return a.write('<div class="accessoriesPrice"><em class="accessoriesPriceText">Acessórios:</em><p class="descricao-preco"><em class="valor-de price-list-price" style="display: block">').reference(b._get(!1,["string","listPrice"]),b,"h").write('<strong class="skuListPrice">').reference(b._get(!1,["listPrice"]),b,"h",["intAsCurrency"]).write('</strong></em><em class="valor-por price-best-price" style="display: block">').reference(b._get(!1,["string","bestPrice"]),b,"h").write('<span class="skuBestPrice">').reference(b._get(!1,["bestPrice"]),b,"h",["intAsCurrency"]).write("</span></em></p></div>")}function i(a,b){return a.write('<div class="totalPrice"><em class="totalPriceText">Total:</em><p class="descricao-preco"><em class="valor-de price-list-price" style="display: block">').reference(b._get(!1,["string","listPrice"]),b,"h").write('<strong class="skuListPrice">').reference(b._get(!1,["listPrice"]),b,"h",["intAsCurrency"]).write('</strong></em><em class="valor-por price-best-price" style="display: block">').reference(b._get(!1,["string","bestPrice"]),b,"h").write('<span class="skuBestPrice">').reference(b._get(!1,["bestPrice"]),b,"h",["intAsCurrency"]).write("</span></em></p></div>")}return dust.register("price",a),a}(),function(){function a(a,c){return a.write("<!-- price modal -->").section(c._get(!1,["product"]),c,{block:b},null)}function b(a,b){return a.write('<div class="vtexsc-skuProductPrice skuselector-price"><div class="regularPrice skuselector-list-price price-list-price">De: <span class="value">').reference(b._get(!1,["listPrice"]),b,"h",["intAsCurrency"]).write('</span></div><div class="newPrice skuselector-best-price price-best-price">Por: <span class="value">').reference(b._get(!1,["bestPrice"]),b,"h",["intAsCurrency"]).write('</span></div><div class="installment price-installments">ou até ').reference(b._get(!1,["installments"]),b,"h").write(" de ").reference(b._get(!1,["installmentsValue"]),b,"h",["intAsCurrency"]).write("</div></div>")}return dust.register("price-modal",a),a}(),function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a=window.jQuery,_.extend(dust.filters,{intAsCurrency:function(a){return _.intAsCurrency(a)}}),_.currencyToInt=function(a){return+a.replace(/\D/gi,"")},b=function(b){function d(a,b,d){this.element=a,this.productId=b,this.options=d,this.getTotal=c(this.getTotal,this),this.getAccessoriesTotal=c(this.getAccessoriesTotal,this),this.accessoriesUpdated=c(this.accessoriesUpdated,this),this.skuUnselected=c(this.skuUnselected,this),this.skuSelected=c(this.skuSelected,this),this.bindEvents=c(this.bindEvents,this),this.update=c(this.update,this),this.hideAllPrice=c(this.hideAllPrice,this),this.render=c(this.render,this),this.getSku=c(this.getSku,this),this.getDefaultStringsFromHtml=c(this.getDefaultStringsFromHtml,this),this.sku=null,this.generateSelectors({ListPrice:".price-list-price",BestPrice:".price-best-price",Savings:".price-savings",Installments:".price-installments",CashPrice:".price-cash",OriginalListPrice:".skuListPrice",OriginalBestPrice:".skuBestPrice",OriginalInstallments:".skuBestInstallmentNumber",OriginalInstallmentsValue:".skuBestInstallmentValue"}),this.options.modalLayout||this.getDefaultStringsFromHtml(),this.bindEvents()}return e(d,b),d.prototype.getDefaultStringsFromHtml=function(){var b,c;return b=a(a(".valor-de")[0]).clone(),b.find("strong").remove(),this.options.strings.listPrice=b.text()||"De: ",c=a(a(".valor-por")[0]).clone(),c.find("strong").remove(),this.options.strings.bestPrice=c.text()||"Por: "},d.prototype.getSku=function(){var a;return a=this.sku||{listPrice:_.currencyToInt(this.findFirstOriginalListPrice().text()),bestPrice:_.currencyToInt(this.findFirstOriginalBestPrice().text()),installments:parseInt(this.findFirstOriginalInstallments().text()),installmentsValue:_.currencyToInt(this.findFirstOriginalInstallmentsValue().text()),available:!0},a.hasDiscount=!!a.bestPrice&&(a.discount=a.listPrice-a.bestPrice)>0,a.validListPrice=!!a.listPrice&&a.listPrice>a.bestPrice,a.validBestPrice=!!a.bestPrice,a},d.prototype.render=function(){var a,b=this;if(this.options.modalLayout)return dust.render("price-modal",{product:this.sku,strings:this.options.strings},function(a,c){if(a)throw new Error("Price-modal Dust error: "+a);return b.element.html(c),b.update()});if(a={product:this.getSku(),accessories:this.getAccessoriesTotal(),total:this.getTotal(),strings:this.options.strings},null!==a.product&&(0!==a.product.listPrice||0!==a.product.bestPrice))return dust.render("price",a,function(a,c){if(a)throw new Error("Price Dust error: "+a);return b.element.html(c),b.update()})},d.prototype.hideAllPrice=function(){return this.hideBestPrice(),this.hideListPrice(),this.hideSavings(),this.hideCashPrice(),this.hideInstallments()},d.prototype.update=function(){var a;return this.hideAllPrice(),a=this.getSku(),a.available&&(this.showBestPrice(),null!=a.bestPrice&&a.bestPrice<a.listPrice&&(this.showListPrice(),this.showSavings()),null!=a.installments&&a.installments>1)?(this.showInstallments(),this.showCashPrice()):void 0},d.prototype.bindEvents=function(){return this.bindProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/skuSelected.vtex",this.skuSelected),this.bindProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/skuUnselected.vtex",this.skuUnselected),this.bindProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/accessoriesUpdated.vtex",this.accessoriesUpdated)},d.prototype.skuSelected=function(a,b,c){return this.sku=c,this.render()},d.prototype.skuUnselected=function(a,b,c){return this.sku=null,this.render()},d.prototype.accessoriesUpdated=function(a,b,c){return this.accessories=c,this.render()},d.prototype.getAccessoriesTotal=function(){var a,b,c,d,e,f;if(null!=(e=this.accessories)?e.length:void 0){for(b={listPrice:0,bestPrice:0},f=this.accessories,c=0,d=f.length;d>c;c++)a=f[c],a.quantity>0&&(b.listPrice+=a.listPrice,b.bestPrice+=a.bestPrice);return b}},d.prototype.getTotal=function(){var a,b,c,d,e,f;if(null!=(e=this.accessories)?e.length:void 0){for(b={listPrice:this.getSku().listPrice,bestPrice:this.getSku().bestPrice},f=this.accessories,c=0,d=f.length;d>c;c++)a=f[c],a.quantity>0&&(b.listPrice+=a.listPrice,b.bestPrice+=a.bestPrice);return b}},d}(ProductComponent),a.fn.price=function(c,d){var e,f,g,h,i,j,k;for(f=a.extend({},a.fn.price.defaults),j=0,k=this.length;k>j;j++)h=this[j],e=a(h),g=e.data(),i=a.extend(!0,f,g,d),e.data("price")||e.data("price",new b(e,c,i));return this},a.fn.price.defaults={originalSku:null,modalLayout:!1,strings:{listPrice:"De: ",bestPrice:"Por: ",discountOf:"Economia de "}}}.call(this);