(function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d=[].slice;b=window||exports,b.EVENT_HISTORY||(b.EVENT_HISTORY={}),a=function(){function a(){this.generateSelectors=c(this.generateSelectors,this),this.triggerProductEvent=c(this.triggerProductEvent,this),this.bindProductEvent=c(this.bindProductEvent,this)}return a.prototype.bindProductEvent=function(a,b,c){var e,f,g,h,i,j;if(null==c&&(c=0),e=function(a,b,e){var f;return $(window).on(a,function(){var a,f,g;return f=arguments[0],a=2<=arguments.length?d.call(arguments,1):[],g=a[c],e===g?b.apply(null,[f].concat(d.call(a))):void 0}),null!=(null!=(f=EVENT_HISTORY[e])?f[a]:void 0)?b.apply(null,EVENT_HISTORY[e][a]):void 0},this.options.multipleProductIds){for(i=this.productId,j=[],g=0,h=i.length;h>g;g++)f=i[g],j.push(e(a,b,f));return j}return e(a,b,this.productId)},a.prototype.triggerProductEvent=function(){var a,b,c,e,f,g;return f=arguments[0],a=2<=arguments.length?d.call(arguments,1):[],c=this.element||$window,e=jQuery.Event(f),b=[this.productId].concat(d.call(a)),c.trigger(e,b),EVENT_HISTORY[g=this.productId]||(EVENT_HISTORY[g]={}),EVENT_HISTORY[this.productId][f]=[e].concat(d.call(b))},a.prototype.generateSelectors=function(a){var b,c,d=this;for(b in a)c=a[b],"function"==typeof c?this["find"+b]=c:this["find"+b]=function(a){return function(){return d.element.find(a)}}(c),this["findFirst"+b]=function(a){return function(){return $(d["find"+a]()[0])}}(b),this["show"+b]=function(a){return function(){return d["find"+a]().show()}}(b),this["hide"+b]=function(a){return function(){return d["find"+a]().hide()}}(b);return this.showAll=function(a){return function(){var e;e=[];for(b in a)c=a[b],e.push(d["show"+b]());return e}}(a),this.hideAll=function(a){return function(){var e;e=[];for(b in a)c=a[b],e.push(d["hide"+b]());return e}}(a)},a}(),b.ProductComponent=a}).call(this),function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a=window.jQuery,b=function(b){function d(a,b,d,e){var f,g,h,i,j=this;if(this.element=a,this.productId=b,null==d&&(d={}),this.options=e,this.buyButtonHandler=c(this.buyButtonHandler,this),this.update=c(this.update,this),this.valid=c(this.valid,this),this.getErrorURL=c(this.getErrorURL,this),this.getURL=c(this.getURL,this),this.accessoriesUpdated=c(this.accessoriesUpdated,this),this.quantityChanged=c(this.quantityChanged,this),this.skuUnselected=c(this.skuUnselected,this),this.skuSelected=c(this.skuSelected,this),this.getChangesFromHREF=c(this.getChangesFromHREF,this),this.bindEvents=c(this.bindEvents,this),this.sku=d.sku||null,this.quantity=d.quantity||1,this.seller=d.seller||1,this.salesChannel=d.salesChannel||1,this.options.multipleProductIds)for(this.manyProducts={},i=this.productId,g=0,h=i.length;h>g;g++)f=i[g],this.manyProducts[f]={sku:null,quantity:1,seller:1};this.accessories=[],"undefined"!=typeof CATALOG_SDK&&null!==CATALOG_SDK&&(this.SDK=CATALOG_SDK,this.SDK.getProductWithVariations(this.productId).done(function(a){return j.productData=a,1===j.productData.skus.length&&(j.triggerProductEvent("vtex.sku.selected",j.productData.skus[0]),j.triggerProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/skuSelected.vtex",j.productData.skus[0])),j.getChangesFromHREF(),j.update()})),this.getChangesFromHREF(),this.bindEvents(),this.update()}return e(d,b),d.prototype.bindEvents=function(){return this.bindProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/skuSelected.vtex",this.skuSelected),this.bindProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/skuUnselected.vtex",this.skuUnselected),this.bindProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/quantityReady.vtex",this.quantityChanged),this.bindProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/quantityChanged.vtex",this.quantityChanged),this.bindProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/accessoriesUpdated.vtex",this.accessoriesUpdated),this.element.on("click",this.buyButtonHandler)},d.prototype.getChangesFromHREF=function(){var a,b,c,d,e;return a=this.element.attr("href"),this._url!==a&&(e=a.match(/sku=(.*?)&/),e&&e[1]&&e[1]!==this.sku&&(this.sku=e[1],this.triggerProductEvent("vtex.sku.changed",{sku:this.sku}),this.triggerProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/skuChanged.vtex",{sku:this.sku})),b=a.match(/qty=(.*?)&/),b&&b[1]&&b[1]!==this.quantity&&(this.quantity=b[1],this.triggerProductEvent("vtex.quantity.changed",this.quantity),this.triggerProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/quantityChanged.vtex",this.quantity)),d=a.match(/seller=(.*?)&/),d&&d[1]&&d[1]!==this.seller&&(this.seller=d[1]),c=a.match(/sc=(.*?)&/),c&&c[1]&&c[1]!==this.salesChannel&&(this.salesChannel=c[1])),this._url=a},d.prototype.skuSelected=function(a,b,c){return this.getChangesFromHREF(),this.options.multipleProductIds?this.manyProducts[b].sku=c:(this.skuData=c,this.sku=c.sku,this.seller=c.sellerId),this.update(),this.options.instaBuy&&c.available?this.element.click():void 0},d.prototype.skuUnselected=function(a,b,c){return this.getChangesFromHREF(),this.options.multipleProductIds?this.manyProducts[b].sku=null:(this.skuData={},this.sku=null),this.update()},d.prototype.quantityChanged=function(a,b,c){return this.getChangesFromHREF(),this.options.multipleProductIds?this.manyProducts[b].quantity=c:this.quantity=c,this.update()},d.prototype.accessoriesUpdated=function(a,b,c){return this.getChangesFromHREF(),this.accessories=c,this.update()},d.prototype.getURL=function(){var a,b,c,d,e,f,g,h,i,j,k,l;if(!this.valid())return this.getErrorURL();if(e=[],this.options.multipleProductIds){j=this.manyProducts;for(b in j)d=j[b],d.sku&&d.sku.available&&(e.push("sku="+d.sku.sku),e.push("qty="+d.quantity),e.push("seller="+d.seller))}else e.push("sku="+this.sku),e.push("qty="+this.quantity),e.push("seller="+this.seller);for(e.push("redirect="+this.options.redirect),e.push("sc="+this.salesChannel),k=this.accessories,h=0,i=k.length;i>h;h++)a=k[h],a.quantity>0&&(e.push("sku="+a.sku),e.push("qty="+a.quantity),e.push("seller="+a.sellerId));this.options.giftRegistry&&e.push("gr="+this.options.giftRegistry),this.options.target&&e.push("target="+this.options.target),l=this.options.queryParams;for(c in l)g=l[c],e.push(""+c+"="+g);return f="/checkout/cart/add?"+e.join("&")},d.prototype.getErrorURL=function(){return this.options.alertOnError?"javascript:alert('"+this.options.errorMessage+"');":"javascript:void(0);"},d.prototype.valid=function(){return!(!this.sku&&!this.options.multipleProductIds)},d.prototype.update=function(){return this.element.attr("href",this.getURL()),this.element.show(),this.options.hideUnavailable&&this.skuData&&this.skuData.available===!1&&this.element.hide(),this.options.hideUnselected&&!this.skuData&&this.element.hide(),this.productData&&this.productData.available===!1?this.element.hide():void 0},d.prototype.buyButtonHandler=function(b){var c=this;return this.valid()?(this.triggerProductEvent("vtex.buyButton.through",this.getURL),this.triggerProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/buyButtonThrough.vtex",this.getURL),this.options.redirect?!0:(a(window).trigger("https://io.vtex.com.br/portal-plugins/2.9.13/js/vtex.modal.hide"),a(window).trigger("https://io.vtex.com.br/portal-plugins/2.9.13/js/modalHide.vtex"),a.get(this.getURL()).done(function(){return c.triggerProductEvent("productAddedToCart"),c.triggerProductEvent("vtex.cart.productAdded"),c.triggerProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/cartProductAdded.vtex"),c.options.addMessage?alert(c.options.addMessage):void 0}).fail(function(){return c.redirect=!0,window.location.href=c.getURL(),c.options.errMessage?alert(c.options.errMessage):void 0}),b.preventDefault(),!1)):(this.triggerProductEvent("vtex.buyButton.failedAttempt",this.options.errorMessage),this.triggerProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/buyButtonFailedAttempt.vtex",this.options.errorMessage),!0)},d}(ProductComponent),a.fn.buyButton=function(c,d,e){var f,g,h,i,j,k,l;for(g=a.extend(!0,{},a.fn.buyButton.defaults),k=0,l=this.length;l>k;k++)i=this[k],f=a(i),h=f.data(),j=a.extend(!0,g,h,e),f.data("buyButton")||f.data("buyButton",new b(f,c,d,j));return this},a.fn.buyButton.defaults={errorMessage:"Por favor, selecione o modelo desejado.",alertOnError:!0,redirect:!0,addMessage:null,errMessage:null,instaBuy:!1,hideUnselected:!1,hideUnavailable:!0,target:null,multipleProductIds:!1,queryParams:{}}}.call(this);