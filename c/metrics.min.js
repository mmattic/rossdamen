/* checkout-ui - v5.16.7 */function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function debounce(func,wait,immediate){function later(){var last=Date.now()-timestamp;wait>last&&last>=0?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args),context=args=null))}var timeout,args,context,timestamp,result;null==wait&&(wait=100);var debounced=function(){context=this,args=arguments,timestamp=Date.now();var callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args),context=args=null),result};return debounced.clear=function(){timeout&&(clearTimeout(timeout),timeout=null)},debounced}function fetchRequest(context){return"undefined"!=typeof window&&"function"!=typeof window.fetch||"undefined"!=typeof global&&"function"!=typeof global.fetch?(console.log("Error, using fetchRequest without fetch object"),null):fetch(context.url,_extends({},context,{body:context.data})).then(function(response){return"json"===context.responseType?response.json():response})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};window.SplunkEvents=function(){function SplunkEvents(){var _this=this;_classCallCheck(this,SplunkEvents),this.logEvent=function(level,type,workflowType,workflowInstance,event,account){_this.validateEvent(event);var parsedEvent=_this.parseEventData({level:level,type:type,workflowType:workflowType,workflowInstance:workflowInstance,account:account});parsedEvent+=_this.parseEventData(event),_this.injectAditionalInfo&&(parsedEvent+=_this.getAdditionalInfo());var data={sourcetype:_this.source,host:_this.host,event:parsedEvent};_this.events.push(data),_this.autoFlush&&_this.debouncedFlush()},this.flush=function(){if(_this.isSendingEvents)return void _this.debouncedFlush();if(_this.validateConfig(),_this.pendingEvents=[].concat(_this.events),_this.events=[],_this.isSendingEvents=!0,_this.debug&&console.log("sending "+_this.pendingEvents.length+" events to splunk"),0!==_this.pendingEvents.length){var splunkBatchedFormattedEvents=_this.formatEventsForSplunkBatch(_this.pendingEvents);_this.request({url:""+_this.endpoint+_this.path,method:"POST",data:splunkBatchedFormattedEvents,headers:_this.headers,responseType:"json"}).then(function(response){_this.debug&&console.log(_this.pendingEvents.length+" events successfuly sent to splunk"),_this.pendingEvents=[],_this.isSendingEvents=!1})["catch"](function(e){_this.events=_this.events.concat(_this.pendingEvents),_this.pendingEvents=[],_this.isSendingEvents=!1,_this.autoRetryFlush?(_this.debug&&console.warn("Error sending events to splunk. Retrying in 5 seconds.",e),_this.debouncedFlush()):_this.debug&&console.warn("Error sending events to splunk.",e)})}}}return SplunkEvents.prototype.config=function(_config){this.events=this.events||[],this.pendingEvents=this.pendingEvents||[],this.isSendingEvents=this.isSendingEvents||!1,this.endpoint=_config.endpoint,this.token=_config.token,this.injectAditionalInfo=void 0!==_config.injectAditionalInfo?_config.injectAditionalInfo:!1,this.autoFlush=void 0!==_config.autoFlush?_config.autoFlush:!0,this.autoRetryFlush=void 0!==_config.autoRetryFlush?_config.autoRetryFlush:!0,this.source=void 0!==_config.source?_config.source:"log",this.path=void 0!==_config.path?_config.path:"/services/collector/event",this.host=void 0!==_config.host?_config.host:"-",this.debug=void 0!==_config.debug?_config.debug:!1,this.debounceTime=void 0!==_config.debounceTime?_config.debounceTime:this.debounceTime||2e3,this.debouncedFlush=this.debouncedFlush||debounce(this.flush,this.debounceTime),this.request=void 0!==_config.request?_config.request:this.request||fetchRequest,this.headers={Authorization:"Splunk "+this.token}},SplunkEvents.prototype.parseEventData=function(event){var parsedEvent="";for(var key in event)if(event.hasOwnProperty(key)&&null!=event[key])switch(_typeof(event[key])){case"string":parsedEvent+=key+'="'+event[key].replace(/\"/g,"")+'" ';break;case"boolean":case"number":parsedEvent+=key+"="+event[key]+" ";break;default:throw"Event property must be string, number or boolean"}return parsedEvent},SplunkEvents.prototype.validateEvent=function(event){if(null===event)throw"Event must not be null";if(void 0===event)throw"Event must not be undefined";if("object"!==("undefined"==typeof event?"undefined":_typeof(event)))throw"Event must be an object"},SplunkEvents.prototype.getAdditionalInfo=function(){if("undefined"==typeof navigator||"undefined"==typeof window)return"";var screen=window.screen?window.screen:{},location=window.location?window.location:{};return'additional_info="'+navigator.userAgent.replace(/\,/g,";")+","+((navigator.browserLanguage||navigator.language)+",")+(navigator.platform+","+(screen.availWidth||"-")+","+(screen.availHeight||"-")+","+location.hostname+",")+(location.pathname+","+location.protocol.replace(":","")+","+(location.hash||"-")+'"')},SplunkEvents.prototype.formatEventsForSplunkBatch=function(events){for(var splunkBatchedFormattedEvents="",i=0;i<events.length;i++)splunkBatchedFormattedEvents+="\n"+JSON.stringify(events[i])+"\n";return splunkBatchedFormattedEvents},SplunkEvents.prototype.validateConfig=function(){if(null===this.token)throw"Token must not be null";if(void 0===this.token)throw"Token must not be undefined";if(null===this.endpoint)throw"endpoint must not be null";if(void 0===this.endpoint)throw"endpoint must not be undefined"},SplunkEvents}(),function(){function l(){l=function(){},h.Symbol||(h.Symbol=m)}function m(a){return"jscomp_symbol_"+(a||"")+n++}function p(){l();var a=h.Symbol.iterator;a||(a=h.Symbol.iterator=h.Symbol("iterator")),"function"!=typeof Array.prototype[a]&&k(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return q(this)}}),p=function(){}}function q(a){var b=0;return r(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function r(a){return p(),a={next:a},a[h.Symbol.iterator]=function(){return this},a}function t(a){p();var b=a[Symbol.iterator];return b?b.call(a):q(a)}function u(a){if(!(a instanceof Array)){a=t(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function w(a,b){var c=XMLHttpRequest.prototype.send,d=v++;XMLHttpRequest.prototype.send=function(f){for(var e=[],g=0;g<arguments.length;++g)e[g-0]=arguments[g];var E=this;return a(d),this.addEventListener("readystatechange",function(){4===E.readyState&&b(d)}),c.apply(this,e)}}function x(a,b){var c=fetch;fetch=function(d){for(var f=[],e=0;e<arguments.length;++e)f[e-0]=arguments[e];return new Promise(function(d,e){var g=v++;a(g),c.apply(null,[].concat(u(f))).then(function(a){b(g),d(a)},function(a){b(a),e(a)})})}}function z(a,b){a=t(a);for(var c=a.next();!c.done;c=a.next())if(c=c.value,b.includes(c.nodeName.toLowerCase())||z(c.children,b))return!0;return!1}function A(a){var b=new MutationObserver(function(c){c=t(c);for(var b=c.next();!b.done;b=c.next())b=b.value,"childList"==b.type&&z(b.addedNodes,y)?a(b):"attributes"==b.type&&y.includes(b.target.tagName.toLowerCase())&&a(b)});return b.observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),b}function B(a,b){if(2<a.length)return performance.now();var c=[];b=t(b);for(var d=b.next();!d.done;d=b.next())d=d.value,c.push({timestamp:d.start,type:"requestStart"}),c.push({timestamp:d.end,type:"requestEnd"});for(b=t(a),d=b.next();!d.done;d=b.next())c.push({timestamp:d.value,type:"requestStart"});for(c.sort(function(a,b){return a.timestamp-b.timestamp}),a=a.length,b=c.length-1;b>=0;b--)switch(d=c[b],d.type){case"requestStart":a--;break;case"requestEnd":if(a++,a>2)return d.timestamp;break;default:throw Error("Internal Error: This should never happen")}return 0}function C(a){a=a?a:{},this.w=!!a.useMutationObserver,this.u=a.minValue||null,a=window.__tti&&window.__tti.e;var b=window.__tti&&window.__tti.o;this.a=a?a.map(function(a){return{start:a.startTime,end:a.startTime+a.duration}}):[],b&&b.disconnect(),this.b=[],this.f=new Map,this.j=null,this.v=-(1/0),this.i=!1,this.h=this.c=this.s=null,w(this.m.bind(this),this.l.bind(this)),x(this.m.bind(this),this.l.bind(this)),D(this),this.w&&(this.h=A(this.B.bind(this)))}function F(a){a.i=!0;var b=0<a.a.length?a.a[a.a.length-1].end:0,c=B(a.g,a.b);G(a,Math.max(c+5e3,b))}function G(a,b){!a.i||a.v>b||(clearTimeout(a.j),a.j=setTimeout(function(){var b=performance.timing.navigationStart,d=B(a.g,a.b),b=(window.a&&window.a.A?1e3*window.a.A().C-b:0)||performance.timing.domContentLoadedEventEnd-b;if(a.u)var f=a.u;else performance.timing.domContentLoadedEventEnd?(f=performance.timing,f=f.domContentLoadedEventEnd-f.navigationStart):f=null;var e=performance.now();null===f&&G(a,Math.max(d+5e3,e+1e3));var g=a.a;5e3>e-d?d=null:(d=g.length?g[g.length-1].end:b,d=5e3>e-d?null:Math.max(d,f)),d&&(a.s(d),clearTimeout(a.j),a.i=!1,a.c&&a.c.disconnect(),a.h&&a.h.disconnect()),G(a,performance.now()+1e3)},b-performance.now()),a.v=b)}function D(a){a.c=new PerformanceObserver(function(b){b=t(b.getEntries());for(var c=b.next();!c.done;c=b.next())if(c=c.value,"resource"===c.entryType&&(a.b.push({start:c.fetchStart,end:c.responseEnd}),G(a,B(a.g,a.b)+5e3)),"longtask"===c.entryType){var d=c.startTime+c.duration;a.a.push({start:c.startTime,end:d}),G(a,d+5e3)}}),a.c.observe({entryTypes:["longtask","resource"]})}var h="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,k="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},n=0,v=0,y="img script iframe link audio video source".split(" ");C.prototype.getFirstConsistentlyInteractive=function(){var a=this;return new Promise(function(b){a.s=b,"complete"==document.readyState?F(a):window.addEventListener("load",function(){F(a)})})},C.prototype.m=function(a){this.f.set(a,performance.now())},C.prototype.l=function(a){this.f["delete"](a)},C.prototype.B=function(){G(this,performance.now()+5e3)},h.Object.defineProperties(C.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(u(this.f.values()))}}});var H={getFirstConsistentlyInteractive:function(a){return a=a?a:{},"PerformanceLongTaskTiming"in window?new C(a).getFirstConsistentlyInteractive():Promise.resolve(null)}};"undefined"!=typeof module&&module.exports?module.exports=H:"function"==typeof define&&define.amd?define("ttiPolyfill",[],function(){return H}):window.ttiPolyfill=H}(),!function(n,e){function p(n,c){t||(t=c,o=n,i=new Date,w(e),s())}function s(){o>=0&&i-r>o&&(c.forEach(function(n){n(o,t)}),c=[])}function l(t){if(t.cancelable){var o=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,o){function i(){p(t,o),r()}function c(){r()}function r(){e(a,i,f),e(u,c,f)}n(a,i,f),n(u,c,f)}(o,t):p(o,t)}}function w(n){["click","mousedown","keydown","touchstart","pointerdown"].forEach(function(e){n(e,l,f)})}var t,o,i,c=[],f={passive:!0,capture:!0},r=new Date,a="pointerup",u="pointercancel";w(n),self.perfMetrics=self.perfMetrics||{},self.perfMetrics.onFirstInputDelay=function(n){c.push(n),s()}}(addEventListener,removeEventListener),function(){var addDefaultData,debug,getMajorFromVersion,log,logEvent,sentErrors;debug=vtex.debug("init"),addDefaultData=function(data){return Object.assign({},{major:getMajorFromVersion(vtex.checkout.version),version:vtex.checkout.version},data)},log=function(metric){var _ref,_ref1;return metric||(metric={}),metric.data=addDefaultData(metric.data||{}),metric=Object.assign({},{namespace:"checkoutui",value:1},metric),null!=(null!=(_ref=vtex.NavigationCapture)?_ref.sendMetric:void 0)?null!=(_ref1=vtex.NavigationCapture)&&"function"==typeof _ref1.sendMetric?_ref1.sendMetric(metric):void 0:console.log("Log",metric)},logEvent=function(){var _ref,_ref1;return null!=(null!=(_ref=vtex.NavigationCapture)?_ref.sendEvent:void 0)?null!=(_ref1=vtex.NavigationCapture)&&"function"==typeof _ref1.sendEvent?_ref1.sendEvent("CheckoutView",{major:getMajorFromVersion(vtex.checkout.version),version:vtex.checkout.version}):void 0:console.log("Log Checkout View Event")},window.checkoutLogger=log,getMajorFromVersion=function(version){var splittedVersion;return null==version&&(version=""),splittedVersion=version.split("."),splittedVersion.length>0?splittedVersion[0]:void 0},window.rcReady?(log({name:"pageview"}),logEvent()):window.addEventListener("rcReady",function(){return log({name:"pageview"}),logEvent()},!1),window.errorLogger=function(error){var col,e,endOfURL,errorMessage,errorURL,httpIndex,line,lineCol,lineColArray,stack;line=0,col=0;try{stack=error.stack.toString(),errorMessage=error.message,httpIndex=stack.indexOf("http"),endOfURL=stack.indexOf(".js",httpIndex)+3,errorURL=stack.slice(httpIndex,endOfURL),lineCol=stack.slice(endOfURL+1,stack.indexOf("\n",endOfURL)),lineColArray=lineCol.split(":"),lineColArray.length>0&&(line=lineColArray[0],col=lineColArray[1])}catch(_error){e=_error,console.log(e)}return log({name:"jsError",data:{error:errorMessage,url:errorURL,line:line,col:col}})},sentErrors={},window.onerror=function(error,url,line,col){var errorKey;error.indexOf("Script error")>-1||(errorKey=""+error+url+line+col,sentErrors[errorKey]||(log({name:"jsError",data:{error:error,url:url,line:line,col:col}}),sentErrors[errorKey]=!0))}}.call(this),function(){var isEnv,isMobile,logSplunk,splunkEvents;splunkEvents=new window.SplunkEvents,splunkEvents.config({endpoint:"https://splunk-heavyforwarder-public.vtex.com:8088",token:"50fe94b0-30b6-442a-9cb1-a476c97ba917"}),isEnv=function(env){return-1!==window.location.href.indexOf(env)},isMobile=function(){var agent,check;return check=!1,agent=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(agent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(agent.substr(0,4)))&&(check=!0),check},logSplunk=function(config){var _ref,_ref1,_ref2,_ref3;return config.event=Object.assign({},{version:"undefined"!=typeof vtex&&null!==vtex&&null!=(_ref=vtex.checkout)?_ref.version:void 0,orderFormId:null!=(_ref1=window.vtexjs)&&null!=(_ref2=_ref1.checkout)&&null!=(_ref3=_ref2.orderForm)?_ref3.orderFormId:void 0,env:isEnv("vtexcommercebeta")&&"beta"||"stable",isMobile:isMobile()},config.event),isEnv("vtexlocal")?console.log("SPLUNK Log",config):splunkEvents.logEvent(config.level,config.type,config.workflowType,config.workflowInstance,config.event,config.account)},window.logSplunk=logSplunk,window.splunkErrorLogger=function(error){var col,e,endOfURL,errorMessage,errorURL,httpIndex,line,lineCol,lineColArray,stack;line=0,col=0;try{stack=error.stack.toString(),errorMessage=error.message,httpIndex=stack.indexOf("http"),endOfURL=stack.indexOf(".js",httpIndex)+3,errorURL=stack.slice(httpIndex,endOfURL),lineCol=stack.slice(endOfURL+1,stack.indexOf("\n",endOfURL)),lineColArray=lineCol.split(":"),lineColArray.length>0&&(line=lineColArray[0],col=lineColArray[1])}catch(_error){e=_error,console.log(e)}return logSplunk({level:"Error",type:"Critical",workflowType:"checkout-ui",workflowInstance:"js-error",event:{error:errorMessage,url:errorURL,line:line,col:col},account:vtex.accountName})}}.call(this),function(){var observer;observer=new PerformanceObserver(function(list){return list.getEntries().forEach(function(entry){var event;return event={eventAction:entry.name,duration:Math.round(entry.startTime+entry.duration),nonInteraction:!0},window.checkoutLogger&&window.checkoutLogger({name:"paint",data:event}),window.logSplunk&&window.logSplunk({level:"Info",type:"kpi",workflowType:"checkout-ui",workflowInstance:"performance-metrics",event:event,account:vtex.accountName})})}),observer.observe({entryTypes:["paint"]}),perfMetrics.onFirstInputDelay(function(delay,evt){var event;return event={eventAction:"first-input-delay",eventLabel:evt.type,eventValue:Math.round(delay),nonInteraction:!0},window.checkoutLogger&&window.checkoutLogger({name:"onFirstInputDelay",data:event}),window.logSplunk&&window.logSplunk({level:"Info",type:"kpi",workflowType:"checkout-ui",workflowInstance:"performance-metrics",event:event,account:vtex.accountName})}),ttiPolyfill.getFirstConsistentlyInteractive().then(function(tti){var event;return event={eventAction:"time-to-interactive",eventValue:tti,nonInteraction:!0},window.checkoutLogger&&window.checkoutLogger({name:"timeToTnteractive",data:event}),window.logSplunk&&window.logSplunk({level:"Info",type:"kpi",workflowType:"checkout-ui",workflowInstance:"performance-metrics",event:event,account:vtex.accountName})})}.call(this);