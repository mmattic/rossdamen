(function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d=[].slice;b=window||exports,b.EVENT_HISTORY||(b.EVENT_HISTORY={}),a=function(){function a(){this.generateSelectors=c(this.generateSelectors,this),this.triggerProductEvent=c(this.triggerProductEvent,this),this.bindProductEvent=c(this.bindProductEvent,this)}return a.prototype.bindProductEvent=function(a,b,c){var e,f,g,h,i,j;if(null==c&&(c=0),e=function(a,b,e){var f;return $(window).on(a,function(){var a,f,g;return f=arguments[0],a=2<=arguments.length?d.call(arguments,1):[],g=a[c],e===g?b.apply(null,[f].concat(d.call(a))):void 0}),null!=(null!=(f=EVENT_HISTORY[e])?f[a]:void 0)?b.apply(null,EVENT_HISTORY[e][a]):void 0},this.options.multipleProductIds){for(i=this.productId,j=[],g=0,h=i.length;h>g;g++)f=i[g],j.push(e(a,b,f));return j}return e(a,b,this.productId)},a.prototype.triggerProductEvent=function(){var a,b,c,e,f,g;return f=arguments[0],a=2<=arguments.length?d.call(arguments,1):[],c=this.element||$window,e=jQuery.Event(f),b=[this.productId].concat(d.call(a)),c.trigger(e,b),EVENT_HISTORY[g=this.productId]||(EVENT_HISTORY[g]={}),EVENT_HISTORY[this.productId][f]=[e].concat(d.call(b))},a.prototype.generateSelectors=function(a){var b,c,d=this;for(b in a)c=a[b],"function"==typeof c?this["find"+b]=c:this["find"+b]=function(a){return function(){return d.element.find(a)}}(c),this["findFirst"+b]=function(a){return function(){return $(d["find"+a]()[0])}}(b),this["show"+b]=function(a){return function(){return d["find"+a]().show()}}(b),this["hide"+b]=function(a){return function(){return d["find"+a]().hide()}}(b);return this.showAll=function(a){return function(){var e;e=[];for(b in a)c=a[b],e.push(d["show"+b]());return e}}(a),this.hideAll=function(a){return function(){var e;e=[];for(b in a)c=a[b],e.push(d["hide"+b]());return e}}(a)},a}(),b.ProductComponent=a}).call(this),function(){function a(a,b){return a.write('<div class="notifyme sku-notifyme" style="display: none;"><div class="notifyme-title-div" style="display: none;"><h3 class="notifymetitle notifyme-title">').reference(b._get(!1,["strings","title"]),b,"h").write('</h3></div><form action="https://io.vtex.com.br/no-cache/AviseMe.aspx" style="display: none;"><fieldset class="sku-notifyme-form notifyme-form"><p>').reference(b._get(!1,["strings","explanation"]),b,"h").write('</p><input class="sku-notifyme-client-name notifyme-client-name" placeholder="').reference(b._get(!1,["strings","namePlaceholder"]),b,"h").write('" size="20"type="text" name="notifymeClientName" id="notifymeClientName"><input class="sku-notifyme-client-email notifyme-client-email" placeholder="').reference(b._get(!1,["strings","emailPlaceholder"]),b,"h").write('" size="20"type="text" name="notifymeClientEmail" id="notifymeClientEmail"><input class="btn-ok sku-notifyme-button-ok notifyme-button-ok" value="ok"type="button" name="notifymeButtonOK" id="notifymeButtonOK"><input type="hidden" class="sku-notifyme-skuid notifyme-skuid" name="notifymeIdSku" value="').reference(b._get(!1,["sku"]),b,"h").write('"></fieldset></form><p class="notifyme-loading-message" style="display: none"><span class="sku-notifyme-loading notifyme-loading">').reference(b._get(!1,["strings","loading"]),b,"h").write('</span></p><fieldset class="success" style="display:none;"><label><em><span class="sku-notifyme-success notifyme-success">').reference(b._get(!1,["strings","success"]),b,"h").write('</span></em></label></fieldset><fieldset class="error" style="display: none"><label><span class="sku-notifyme-error   notifyme-error"></span></label></fieldset></div>')}return dust.register("notify-me",a),a}(),function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a=window.jQuery,b=function(b){function d(a,b,d){var e=this;this.element=a,this.productId=b,this.options=d,this.submit=c(this.submit,this),this.setError=c(this.setError,this),this.skuUnselected=c(this.skuUnselected,this),this.showNM=c(this.showNM,this),this.skuSelected=c(this.skuSelected,this),this.bindEvents=c(this.bindEvents,this),this.render=c(this.render,this),this.init=c(this.init,this),this.sku=this.options.sku,"undefined"!=typeof CATALOG_SDK&&null!==CATALOG_SDK&&(this.SDK=CATALOG_SDK,null!=this.productId&&this.SDK.getProductWithVariations(this.productId).done(function(a){return e.productData=a,1===e.productData.skus.length&&(e.triggerProductEvent("vtex.sku.selected",e.productData.skus[0]),e.triggerProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/skuSelected.vtex",e.productData.skus[0])),e.render()})),this.generateSelectors({Root:".notifyme",TitleDiv:".notifyme-title-div",Form:"form",Name:".notifyme-client-name",Email:".notifyme-client-email",SkuId:".notifyme-skuid",Loading:".notifyme-loading-message",Success:"fieldset.success",Error:"fieldset.error",Button:".notifyme-button-ok"}),this.history={},this.init()}return e(d,b),d.prototype.POST_URL="https://io.vtex.com.br/no-cache/AviseMe.aspx",d.prototype.init=function(){return this.render(),this.bindEvents()},d.prototype.render=function(){var a=this;return this.productData&&"lista"===this.productData.displayMode?void 0:dust.render("notify-me",this.options,function(b,c){if(b)throw new Error("Notify Me Dust error: "+b);return a.element.html(c),a.options.sku?a.showNM():void 0})},d.prototype.bindEvents=function(){return this.options.sku||(this.bindProductEvent("skuSelected.vtex",this.skuSelected),this.bindProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/skuUnselected.vtex",this.skuUnselected)),this.options.ajax&&this.element.on("submit",this.submit),this.options.ajax?this.findButton().on("click",this.submit):void 0},d.prototype.skuSelected=function(a,b,c){return this.sku=c.sku,this.hideAll(),this.options.sku||!c.available?this.showNM():void 0},d.prototype.showNM=function(){switch(this.showRoot(),this.showTitleDiv(),this.history[this.sku]){case"success":return this.showSuccess();default:return this.findSkuId().val(this.sku),this.showForm(),this.showName(),this.showEmail(),this.showButton()}},d.prototype.skuUnselected=function(a,b,c){return this.sku=null,this.hideAll()},d.prototype.setError=function(a){return this.findError().find("span").text(a)},d.prototype.submit=function(b){var c,d,e,f=this;return b.preventDefault(),d=this.findName(),""===d.val()?(d.focus(),!1):(c=this.findEmail(),""===c.val()?(c.focus(),!1):c.val().match(/^.+@.+\..+$/)?(this.hideForm(),this.hideError(),this.showLoading(),e=a.post(this.POST_URL,this.findForm().serialize()).always(function(){return f.hideLoading()}).done(function(){return f.showSuccess(),f.history[f.sku]="success"}).fail(function(){return f.showForm(),f.setError(f.options.strings.error),f.showError(),f.history[f.sku]="fail"}),this.triggerProductEvent("vtex.notifyMe.submitted",this.sku,e),this.triggerProductEvent("https://io.vtex.com.br/portal-plugins/2.9.13/js/notifyMeSubmitted.vtex",this.sku,e),!1):(c.focus(),this.setError(this.options.strings.emailErrorMessage),this.showError(),!1))},d}(ProductComponent),a.fn.notifyMe=function(c,d){var e,f,g,h,i,j,k;for(f=a.extend({},a.fn.notifyMe.defaults),j=0,k=this.length;k>j;j++)h=this[j],e=a(h),g=e.data(),i=a.extend(!0,f,g,d),e.data("notifyMe")||e.data("notifyMe",new b(e,c,i));return this},a.fn.notifyMe.defaults={ajax:!0,sku:null,strings:{title:"",explanation:"Para ser avisado da disponibilidade deste Produto, basta preencher os campos abaixo.",namePlaceholder:"Digite seu nome...",emailPlaceholder:"Digite seu e-mail...",loading:"Carregando...",success:"Cadastrado com sucesso. Assim que o produto for disponibilizado você receberá um email avisando.",error:"Não foi possível cadastrar. Tente mais tarde.",emailErrorMessage:"Email inválido, digite novamente."}}}.call(this);