function initGoogleMap(){(function($){var alphabet='ABCDEFGHIJKLMNOPQRSTUVWXYZ';var markerColor='FF5B1E';var markerTextColor='222222';$('.google-map-list').each(function(){var $this=$(this);var $map=$this.find('.google-map');var mapZoom=parseInt($map.attr('data-map-zoom'));var mapLat=parseFloat($map.attr('data-map-lat'));var mapLng=parseFloat($map.attr('data-map-lng'));var $markers=$this.find('.location');var map;var openMarker;var markers=[];var infoWindows=[];var closeInfoWindows=function(){infoWindows.forEach(function(el){el.close();});}
var openInfoWindow=function(infoWindow,map,marker){if(marker!==openMarker){closeInfoWindows();infoWindow.open(map,marker);openMarker=marker;}}
if($map.length){map=new google.maps.Map($map[0],{zoom:mapZoom,center:{lat:mapLat,lng:mapLng},scrollwheel:false,});}
if($markers.length){var i=0;$markers.each(function(){var $this=$(this);var title=$this.attr('data-title');var tagline=$this.attr('data-tagline');var websiteUrl=$this.attr('data-website-url');var url=$this.attr('data-url');var lat=parseFloat($this.attr('data-lat'));var lng=parseFloat($this.attr('data-lng'));var address=$this.attr('data-address');var content=''+
'<div class="info-window-content">'+
'<header><h4 class="title">'+title+'</h4></header>'+
'<div class="content">'+
'<div class="tagline">'+tagline+'</div>'+
(websiteUrl?'<a href="'+websiteUrl+'" class="website-link" target="_blank">Website</a>':'')+
(websiteUrl&&url?'<span class="sep"> / </span>':'')+
(url?'<a href="'+url+'" class="directions-link">Directions</a>':'')+
'</div>';var infoWindow=new google.maps.InfoWindow({content:content});infoWindows.push(infoWindow);var marker=new google.maps.Marker({title:title,position:{lat:lat,lng:lng},map:map,icon:'http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld='+alphabet[i]+'|'+markerColor+'|'+markerTextColor});marker.addListener('click',function(){openInfoWindow(infoWindow,map,marker);});$this.delegate('.open-marker','click',function(e){e.preventDefault();openInfoWindow(infoWindow,map,marker);scrollTo($map);});$this.on('hover',function(e){openInfoWindow(infoWindow,map,marker);});markers.push(marker);i++;});}});$('.google-maps-street-view').each(function(){var streetViewService=new google.maps.StreetViewService();var $this=$(this);var el=$this[0];var panoramaGetBy=$this.attr('data-panorama-get-by');var heading=parseInt($this.attr('data-heading'));var pitch=parseInt($this.attr('data-pitch'));if(panoramaGetBy==='id'){var panoramaId=$this.attr('data-panorama-id');streetViewService.getPanoramaById(panoramaId,function(data,status){if(status!='OK'){$this.hide();}else{var location=data.location;var latLng=location.latLng;var options={position:latLng,pov:{heading:heading,pitch:pitch,},visible:true,scrollwheel:false,};var panorama=new google.maps.StreetViewPanorama(el,options);}});}else if(panoramaGetBy==='latlng'){var lat=parseFloat($this.attr('data-lat'));var lng=parseFloat($this.attr('data-lng'));var latLng=new google.maps.LatLng(lat,lng);streetViewService.getPanoramaByLocation(latLng,50,function(data,status){if(status!='OK'){$this.hide();}else{var options={position:latLng,pov:{heading:heading,pitch:pitch,},visible:true,scrollwheel:false,};var panorama=new google.maps.StreetViewPanorama(el,options);}});}});})(jQuery);}